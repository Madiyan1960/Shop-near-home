<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–∞–≥–∞–∑–∏–Ω</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .product { margin-bottom: 10px; }
    .cart { margin-top: 20px; border-top: 1px solid #ccc; padding-top: 10px; }
    .cart-item { margin-bottom: 5px; }
  </style>
</head>
<body>
  <h1>–ú–∞–≥–∞–∑–∏–Ω</h1>

  <!-- –¢–æ–≤–∞—Ä—ã -->
  <div class="product">
    <strong>–¢–≤–æ—Ä–æ–≥ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π –°–∞—Ä–∞—Ç–æ–≤—Å–∫–∏–π –ø–æ–ª–µ–∑–Ω—ã–π</strong> ‚Äî 390 —Ç–≥
    <button onclick="addToCart('–¢–≤–æ—Ä–æ–≥ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π –°–∞—Ä–∞—Ç–æ–≤—Å–∫–∏–π –ø–æ–ª–µ–∑–Ω—ã–π', 390)">–î–æ–±–∞–≤–∏—Ç—å</button>
  </div>
  <div class="product">
    <strong>–ú–æ–ª–æ–∫–æ –ê—Å—Ç–∞–Ω–∞ 3.2%</strong> ‚Äî 450 —Ç–≥
    <button onclick="addToCart('–ú–æ–ª–æ–∫–æ –ê—Å—Ç–∞–Ω–∞ 3.2%', 450)">–î–æ–±–∞–≤–∏—Ç—å</button>
  </div>

  <!-- –î–∞–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è -->
  <h3>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h3>
  <input id="name" placeholder="–ò–º—è"><br><br>
  <input id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω"><br><br>
  <input id="address" placeholder="–ê–¥—Ä–µ—Å"><br><br>

  <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
  <div class="cart" id="cart"></div>

  <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
  <button onclick="sendOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ WhatsApp</button>

  <script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function saveCart() {
      localStorage.setItem('cart', JSON.stringify(cart));
    }

    function renderCart() {
      const cartDiv = document.getElementById('cart');
      cartDiv.innerHTML = '<h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>';
      if (cart.length === 0) {
        cartDiv.innerHTML += '<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
        return;
      }

      let total = 0;
      cart.forEach(item => {
        total += item.price * item.quantity;
        cartDiv.innerHTML += `<div class="cart-item">${item.name} ‚Äî ${item.price} —Ç–≥ x${item.quantity}</div>`;
      });

      cartDiv.innerHTML += `<strong>–ò—Ç–æ–≥–æ: ${total} —Ç–≥</strong>`;
    }

    function addToCart(name, price) {
      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.quantity += 1;
      } else {
        cart.push({ name, price, quantity: 1 });
      }
      saveCart();
      renderCart();
    }

    function sendOrder() {
      const name = document.getElementById('name').value;
      const phone = document.getElementById('phone').value;
      const address = document.getElementById('address').value;

      localStorage.setItem('customerName', name);
      localStorage.setItem('customerPhone', phone);
      localStorage.setItem('customerAddress', address);

      if (cart.length === 0) {
        alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!");
        return;
      }

      const orderItems = cart.map(item => `${item.name} ‚Äî ${item.price} —Ç–≥ x${item.quantity}`).join('\n');
      const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
      const orderText = `üõí –ù–æ–≤—ã–π –∑–∞–∫–∞–∑:\n\n${orderItems}\n\nüì¶ –û–±—â–∞—è —Å—É–º–º–∞: ${total} —Ç–≥\n\nüë§ –ò–º—è: ${name}\nüìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\nüè† –ê–¥—Ä–µ—Å: ${address}`;

      const url = `https://wa.me/?text=${encodeURIComponent(orderText)}`;
      window.open(url, '_blank');
    }

    // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    renderCart();
  </script>
</body>
</html>
