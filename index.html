<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–∞–≥–∞–∑–∏–Ω –Ω–∞ Airtable</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: auto; }
    .product { border: 1px solid #ccc; border-radius: 10px; padding: 10px; margin: 10px; width: 200px; display: inline-block; vertical-align: top; }
    img { max-width: 100%; border-radius: 8px; }
    #cart { margin-top: 30px; border-top: 2px dashed #666; padding-top: 20px; }
  </style>
</head>
<body>

<h1>–ú–∞–≥–∞–∑–∏–Ω</h1>
<div id="products">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...</div>

<h2>üõí –ö–æ—Ä–∑–∏–Ω–∞</h2>
<div id="cart">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>

<script>
const API_TOKEN = 'patH3Tqs7sTMEpo1G.f8d89a927a5f6e352cbe307be7a67e0e297ff32aaabf35e8115af646233845db';       // ‚Üê –í–°–¢–ê–í–¨–¢–ï –°–Æ–î–ê –í–ê–® PAT
const BASE_ID = 'appLj0ax0IDVaRTd4';     // ‚Üê –í–°–¢–ê–í–¨–¢–ï –°–Æ–î–ê –í–ê–® BASE ID
const TABLE_NAME = '–¢–æ–≤–∞—Ä—ã';             // ‚Üê –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã
const API_URL = `https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}`;
const HEADERS = { Authorization: `Bearer ${API_TOKEN}` };

const cart = [];

function renderCart() {
  const cartDiv = document.getElementById('cart');
  if (cart.length === 0) {
    cartDiv.innerHTML = '–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞';
    return;
  }

  let html = '<ul>';
  let total = 0;
  cart.forEach(item => {
    html += `<li>${item.name} ‚Äî ${item.price} —Ç–≥</li>`;
    total += item.price;
  });
  html += `</ul><strong>–ò—Ç–æ–≥–æ: ${total} —Ç–≥</strong>`;
  cartDiv.innerHTML = html;
}

function addToCart(name, price) {
  cart.push({ name, price });
  renderCart();
}

fetch(API_URL, { headers: HEADERS })
  .then(res => res.json())
  .then(data => {
    const container = document.getElementById('products');
    container.innerHTML = '';

    data.records.forEach(record => {
      const name = record.fields['–ù–∞–∑–≤–∞–Ω–∏–µ'];
      const price = record.fields['–¶–µ–Ω–∞'];
      const img = record.fields['–§–æ—Ç–æ']?.[0]?.url;

      const div = document.createElement('div');
      div.className = 'product';
      div.innerHTML = `
        <h3>${name}</h3>
        <p><strong>${price} —Ç–≥</strong></p>
        ${img ? `<img src="${img}" alt="${name}">` : ''}
        <button onclick="addToCart('${name}', ${price})">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
      `;
      container.appendChild(div);
    });
  })
  .catch(err => {
    document.getElementById('products').innerText = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤.';
    console.error(err);
  });

</script>

</body>
</html>
