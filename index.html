<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Отправка заказа в Airtable</title>
</head>
<body>
  <h2>Пример заказа</h2>
  <button onclick="sendOrder()">Отправить заказ</button>

  <script>
    async function sendOrder() {
      const airtableApiKey = "patH3Tqs7sTMEpo1G.f8d89a927a5f6e352cbe307be7a67e0e297ff32aaabf35e8115af646233845db";
      const airtableBaseId = "appLj0ax0IDVaRTd4";
      const airtableTableName = "Заказы";

      const orderData = {
        fields: {
          Name: "Проверка вручную",
          Phone: "87001234567",
          Address: "ул. Примерная, 1",
          Products: "Пример - 100 тг × 1",
          Total: 100
          // Удалены поля, которых нет в вашей таблице (например, Status, Time)
        }
      };

      try {
        const response = await fetch(`https://api.airtable.com/v0/${airtableBaseId}/${encodeURIComponent(airtableTableName)}`, {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${airtableApiKey}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify(orderData)
        });

        const result = await response.json();
        console.log(result);
        alert("Успешно отправлено! ID записи: " + result.id);
      } catch (error) {
        console.error("Ошибка при отправке:", error);
        alert("Ошибка при отправке заказа!");
      }
    }
  </script>
</body>
</html>
